(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6944],{32122:function(e,t,n){"use strict";var a=n(67294),l=n(93509);t.Z=function(){var e=(0,a.useRef)(),t=(0,a.useCallback)((function(t){if(t){var n=Array.from(t.querySelectorAll("a"));n.length&&n.forEach((function(e){return e.addEventListener("click",(function(e){(0,l.Z)("click","in_content_click",e.target.href)}))})),e.current=t}}),[]);return[e,t]}},78413:function(e,t,n){"use strict";var a=n(67294);t.Z=function(e){var t=(0,a.useState)(!1),n=t[0],l=t[1],r=(0,a.useState)(!1),s=r[0],i=r[1];return(0,a.useEffect)((function(){if(e.current){var t=e.current.getBoundingClientRect().height>70;l(t),i(t)}}),[e]),{isTruncated:n,needsTruncating:s,setIsTruncated:l}}},80205:function(e,t,n){"use strict";var a=n(85893),l=n(26265),r=n(32292),s=n(94184),i=n.n(s),o=n(32122),d=n(78413),c=n(93509),p=n(5839),u=n.n(p);t.Z=function(e){var t,n=e.gaCategory,s=e.html,p=e.small,y=void 0!==p&&p,m=(0,o.Z)(),g=(0,r.Z)(m,2),f=g[0],_=g[1],h=(0,d.Z)(f),R=h.isTruncated,x=h.needsTruncating,b=h.setIsTruncated;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:_,className:i()([u().Card__Body,(t={},(0,l.Z)(t,u()["Card__Body--Small"],y),(0,l.Z)(t,u()["Card__Body--Truncated"],R),t)]),dangerouslySetInnerHTML:{__html:s}}),x&&(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"btn btn--link btn--link-base",type:"button",onClick:function(){(0,c.Z)("click",n,R?"read_more":"read_less"),b(!R)},children:R?"Read more":"See less"})})]})}},38490:function(e,t,n){"use strict";var a=n(85893),l=n(98707),r=n(38027),s=n(40621),i=n(89307),o=n(56667),d=n(35966);t.Z=function(e){var t=e.author,n=e.avatarSize,c=e.edited,p=e.gaCategory,u=e.date,y=e.itemAlias,m=e.patch,g=t.badges,f=t.name,_=t.profilePicture,h=t.rid,R=(0,l.isEditor)(h)?m:t.patch,x=(0,d.Sy)(new Date(u)),b=(0,l.getRoleLabel)(h,g);return(0,a.jsxs)("div",{className:"byline byline--avatar",children:[(0,a.jsx)(o.Z,{gaCategory:p,gaLabel:"user_profile_picture",href:t.alias,children:(0,a.jsx)(r.Z,{imageUrl:_,name:f,size:n})}),(0,a.jsxs)("div",{className:"byline__wrapper",children:[(0,a.jsxs)(o.Z,{className:"byline__name byline__name--avatar",gaCategory:p,gaLabel:"user_byline",href:t.alias,children:[(0,a.jsx)("strong",{children:f}),", ".concat(b)]}),(0,a.jsx)(s.Z,{badges:g,roleId:h}),(0,a.jsxs)("div",{className:"byline__row",children:[(0,a.jsx)(o.Z,{className:"byline__secondary",gaCategory:p,gaLabel:"user_home_patch",href:R.alias,children:"".concat(R.name,", ").concat(R.region.abbreviation)}),(0,a.jsx)(i.Z,{}),(0,a.jsx)(o.Z,{className:"byline__secondary",gaCategory:p,gaLabel:"timestamp",href:y,children:(0,a.jsx)("time",{dateTime:u,children:x})}),c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{}),"Edited"]}):null]})]})]})}},1693:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var a=n(85893),l=n(32292),r=n(98707),s=n(83332),i=n(72141),o=n(26570),d=n(18758),c=n(38027),p=n(93509),u=n(66873),y=n(26265),m=n(94184),g=n.n(m),f=n(99670),_=n.n(f),h=function(e){var t,n=e.avatar,l=e.children,r=e.isFloating,s=e.isNested,i=e.onClick,o=e.showCamera;return(0,a.jsxs)("button",{className:g()([_().ReplyField,(t={},(0,y.Z)(t,_()["ReplyField--floating"],r),(0,y.Z)(t,_()["ReplyField--nested"],s),t)]),onClick:i,type:"button",children:[n,(0,a.jsx)("span",{className:"compose-block__label",children:l}),o&&(0,a.jsx)("i",{className:"compose-block__image-icon fa fa-camera-alt"}),(0,a.jsx)("span",{className:"compose-block__post",children:"Reply"})]})},R=function(e){var t,n=e.addReply,y=e.canonicalUrl,m=e.clearMention,g=e.gaCategory,f=e.isFloating,_=void 0!==f&&f,R=e.imageUploadEnabled,x=void 0===R||R,b=e.placeholder,Z=void 0===b?"Write your reply":b,v=e.threadState,F=e.toggleReplyForm,j=e.user,C=(0,i.Z)(),T=C.showEmailVerification,S=C.showQuickRegistrationForm,N=(0,o.ZP)(),k=(0,l.Z)(N,2),I=k[0],P=k[1],E=v.replyFormState===d.p_.expanded,w=v.type===s.ZP.reply&&v.repliesToDisplay>0,D=(0,a.jsx)(c.Z,{imageUrl:null===j||void 0===j?void 0:j.profilePicture,size:_?c.D.base:c.D.small,name:null===j||void 0===j?void 0:j.name}),U=function(e){e.rid!==r.RoleId.ReadOnly?F():T(y)};return E?(0,a.jsx)(u.Z,{avatar:D,mention:(null===(t=v.mention)||void 0===t?void 0:t.id)!==(null===j||void 0===j?void 0:j.id)?v.mention:null,clearMention:m,formActions:P,formState:I,gaCategory:g,imageUploadEnabled:x,isFloating:_,isNested:w,parent:{type:v.type,id:v.id},patchId:v.patchId,placeholder:Z,onFormToggle:function(){F()},onSubmitSuccess:function(e){F(),n(e)},user:j}):(0,a.jsx)(h,{avatar:D,onClick:function(){(0,p.Z)("click",g,"reply_field"),j?U(j):S(U)},isFloating:_,isNested:w,showCamera:x,children:Z})}},66873:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var a=n(85893),l=n(26265),r=n(809),s=n.n(r),i=n(92447),o=n(94184),d=n.n(o),c=n(56647),p=n(79737),u=n(26570),y=n(31266),m=n(3606),g=n(88977),f=n(88416),_=n(92618),h=n(93509),R=n(62656),x=n(91806),b=n.n(x),Z=function(e){var t=e.name,n=e.onRemove;return(0,a.jsxs)("span",{className:b().Mention,children:["Replying to ",t,(0,a.jsx)("button",{className:b().Mention__dismissButton,onClick:n,type:"button",children:(0,a.jsx)("i",{className:"fa fa-times-fal"})})]})},v=n(2677),F=n.n(v),j=function(e){var t,n=e.avatar,r=e.clearMention,o=e.formActions,x=e.formState,b=e.gaCategory,v=e.imageUploadEnabled,j=e.isFloating,C=void 0!==j&&j,T=e.isNested,S=e.mention,N=e.parent,k=e.patchId,I=e.placeholder,P=e.onFormToggle,E=e.onSubmitSuccess,w=e.user,D=o.addImages,U=o.enterMessage,O=o.removeImage,M=o.resetForm,B=o.submitForm,A=o.submitFormFailed,L=o.submitFormSucceeded,Y=x.id,z=x.images,H=x.message,J=x.status===u.vH.pending,q=!J&&0===z.length,V=!!Y,W="reply_".concat(V?"update":"publish"),K=(0,p.Z)().handleExpiredSession,X=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,a,l,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,B(),t={id:Y,images:z,mention:S,message:H,parent:N,patchId:k},!Y){e.next=9;break}return e.next=6,(0,f.uf)(t);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,(0,f.PP)(t);case 11:e.t0=e.sent;case 12:n=e.t0,E(n),(0,R.Z)("success",b,W),L(),1===n.status&&z.length>n.images.length?(0,_.Z)({title:"Unable to add image",message:"An image failed to upload because it was flagged as possibly inappropriate.",type:"info"}):(0,_.Z)({title:"Success!",message:Y?"Your reply has been updated":"Your reply has been sent",type:"success"}),e.next=27;break;case 19:e.prev=19,e.t1=e.catch(0),a=e.t1.message,l=e.t1.response,r=e.t1.status,i=(l||{message:a}).data,o=i.message,A(),r===c.W.UNAUTHORIZED&&K(),(0,_.Z)({message:o,type:"danger"});case 27:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)("form",{className:d()([F().ReplyForm,(t={},(0,l.Z)(t,F()["ReplyForm--floating"],C),(0,l.Z)(t,F()["ReplyForm--nested"],T),t)]),onSubmit:function(e){e.preventDefault(),(0,h.Z)("submit",b,W),w?H.trim().length<2?(0,_.Z)({message:"Your post is too short.",type:"danger"}):H.length>5e3?(0,_.Z)({message:"Your post is too long.",type:"danger"}):X():K()},children:[S&&(0,a.jsx)("header",{className:F().ReplyForm__header,children:(0,a.jsx)(Z,{name:S.name,onRemove:r})}),(0,a.jsxs)("div",{className:F().ReplyForm__fieldContainer,children:[n,(0,a.jsx)(g.Z,{changeText:U,isEditing:V,isReply:!0,name:"message",placeholder:I,value:H})]}),z.length>0&&(0,a.jsx)(m.Z,{images:z,handleRemoveImage:O}),(0,a.jsxs)("footer",{className:F().ReplyForm__footer,children:[(0,a.jsx)("button",{className:F().ReplyForm__cancel,onClick:function(){P(),M()},disabled:J,type:"button",children:"Cancel"}),v&&(0,a.jsx)(y.Z,{disabled:!q,onChange:D}),(0,a.jsxs)("button",{className:F().ReplyForm__submit,disabled:J,type:"submit",children:[Y?"Update":"Reply",J&&(0,a.jsx)("i",{className:"fa fa-spinner icon icon--space-left spin"})]})]})]})}},48332:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var a=n(85893),l=n(26265),r=n(32292),s=n(94184),i=n.n(s),o=n(67294),d=n(75750),c=n(16134),p=n(27882),u=n(93509),y=n(56667),m=n(169),g=n.n(m),f=function(){return(0,a.jsx)("div",{className:g().DeletedReply,children:(0,a.jsxs)("p",{className:g().DeletedReply__text,children:["Reply deleted."," ",(0,a.jsx)(y.Z,{className:g().DeletedReply__link,href:"/info/community-guidelines",children:"See our guidelines."})]})})},_=n(5152),h=n(83332),R=n(3072),x=n(55045),b=n(18758),Z=n(73261),v=n(61021),F=n(75012),j=n(80205),C=n(61026),T=n(1693),S=n(38490),N=n(19257),k=n.n(N),I=(0,_.default)((function(){return n.e(3966).then(n.bind(n,23966))}),{loadableGenerated:{webpack:function(){return[23966]},modules:["../src/reply/components/ReplyCard/index.tsx -> ../ReplyForm/EditReplyForm"]}}),P=function(e){var t=e.impressionTrackingLocation,n=e.isReplyingEnabled,l=e.item,s=e.onSendDeletedReplyToParent,i=e.onSendUpdatedReplyToParent,c=e.onToggleParentReplyForm,p=(0,R.Z)(),u=l.id,y=l.replies,m=l.root,g=l.type,f=l.author,_=l.body,N=l.created,P=l.displayDate,E=l.flags,D=l.imageThumbnail,U=l.images,O=l.itemAlias,M=l.patch,B=l.parent,A=l.replyCount,L=l.title,Y=l.totalReplies,z=(0,o.useState)(!1),H=z[0],J=z[1],q=E.thankCount,V="".concat(B.type,"_").concat(g),W="reply"===B.type,K=m.type!==h.ZP.article,X=!!p,G=!(!X||p.id!==f.id),Q=(0,x.Z)(l,t),$=(0,r.Z)(Q,2)[1],ee=(0,b.ZP)({id:u,type:g,patchId:M.id,replies:y.results,repliesToDisplay:y.results.length?1:0,replyCount:A,totalReplies:Y,status:y.results.length?d.Z.idle:d.Z.collapsed,fetchOnExpand:!y.results.length&&A>0,canReply:n,mention:f,replyFormState:b.p_.hidden,nextPageUrl:y.nextPageUrl}),te=(0,r.Z)(ee,2),ne=te[0],ae=te[1],le=ae.addReply,re=ae.clearMention,se=ae.deleteReply,ie=ae.getReplies,oe=ae.toggleReplies,de=ae.toggleReplyForm,ce=ae.toggleParentReplyForm,pe=ae.updateReply;return H?(0,a.jsx)("div",{className:k().Thread__Reply,children:(0,a.jsx)(Z.Z,{children:(0,a.jsxs)(F.Z,{isCondensed:!1,children:[(0,a.jsx)(S.Z,{author:f,date:P,edited:N!==P,gaCategory:V,itemAlias:O,patch:M}),(0,a.jsx)(I,{author:f,currentBody:_,cancelEditing:function(){return J(!1)},gaCategory:V,imageUploadEnabled:K,images:U,id:u,parent:B,patchId:M.id,updateReply:i,user:p})]})})}):(0,a.jsxs)("div",{className:k().Thread__Reply,ref:$,children:[(0,a.jsxs)(Z.Z,{children:[(0,a.jsxs)(F.Z,{isCondensed:!!D,children:[f&&(0,a.jsx)(S.Z,{author:f,date:P,edited:N!==P,gaCategory:V,itemAlias:O,patch:M}),(0,a.jsx)(j.Z,{gaCategory:V,html:_,small:W})]}),D&&(0,a.jsx)(C.Z,{src:D,title:L})]}),(0,a.jsxs)(v.ol,{children:[(0,a.jsxs)(v.Tq,{children:[(0,a.jsx)(v.HS,{itemId:l.id,contentType:l.type,userId:p?p.id:null,count:q,gaCategory:V,patchId:M.id,author:f}),(0,a.jsx)(v.g4,{count:ne.totalReplies,gaCategory:V,itemAlias:O,onClick:function(){W?c(f):oe()},threadStatus:ne.status,type:g})]}),(0,a.jsxs)(v.oj,{children:[!G&&(0,a.jsx)(v.OU,{gaCategory:V,itemId:l.id,contentType:l.type,userId:p?p.id:null,patchId:M.id,flags:E,userRoleId:p?p.rid:null,authorUserId:f.id,authorRoleId:f.rid}),X&&(0,a.jsx)(v.U1,{authorId:f.id,contentType:g,deleteReply:s,id:u,onClick:function(){return J(!0)}})]})]}),!W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w,{isReplyingEnabled:n,deleteReply:se,gaCategory:V,getReplies:ie,impressionTrackingLocation:t,replyId:null,threadState:ne,toggleParentReplyForm:ce,updateReply:pe}),ne.replyFormState!==b.p_.hidden&&(0,a.jsx)(T.Z,{addReply:le,clearMention:re,gaCategory:V,imageUploadEnabled:K,threadState:ne,toggleReplyForm:de,user:p,canonicalUrl:O})]})]})},E=function(e){var t,n=e.deleteReply,s=e.gaCategory,y=e.getReplies,m=e.impressionTrackingLocation,g=e.isReplyingEnabled,_=e.replyId,h=e.threadState,R=e.toggleParentReplyForm,x=e.updateReply,b=h.replies,Z=h.repliesToDisplay,v=h.replyCount,F=h.status,j=h.specificReplyId,C=(0,c.Z)(null,!1),T=(0,r.Z)(C,3),S=T[1],N=T[2],I=(0,o.useMemo)((function(){return function(e,t,n,a){var l=e.slice().reverse().slice(-1*t,e.length),r=null;if(a){var s=n-1;r="Show ".concat(s,s>1?" more replies":" more reply")}else{var i=Math.min(n-t,12);r=i>1?"Show previous ".concat(i," replies"):"Show ".concat(i," previous reply")}return[l,r,n>t||a&&n>1]}(b,Z,v,j)}),[b,Z,v,j]),E=I[0],w=I[1],D=I[2];(0,o.useEffect)((function(){N&&F===d.Z.waitingForInViewToFetch&&y(_)}),[y,N,_,F,h.id]);return(0,a.jsxs)("div",{ref:S,className:i()([k().Thread,(t={},(0,l.Z)(t,k()["Thread--collapsed"],F===d.Z.collapsed),(0,l.Z)(t,k()["Thread--expanded"],b.length>0),t)]),children:[D&&F!==d.Z.pending?(0,a.jsx)("button",{className:"btn btn--link ".concat(k().Thread__action),type:"button",onClick:function(){(0,u.Z)("click",s,"show_previous_replies"),y()},children:(0,a.jsx)("strong",{children:w})}):null,F===d.Z.pending?(0,a.jsxs)("p",{className:k().Thread__status,children:["Loading replies"," ",(0,a.jsx)("i",{className:"fa fa-spinner icon icon--space-right spin"})]}):null,(0,a.jsx)(p.Z,{children:N&&E.map((function(e){return 1!==e.status?(0,a.jsx)(f,{},"".concat(e.type,":").concat(e.id)):(0,a.jsx)(P,{impressionTrackingLocation:m,isReplyingEnabled:g,item:e,onSendDeletedReplyToParent:n,onSendUpdatedReplyToParent:x,onToggleParentReplyForm:R},"".concat(e.type,":").concat(e.id))}))})]})},w=(0,o.memo)(E)},18758:function(e,t,n){"use strict";n.d(t,{Th:function(){return x},p_:function(){return b},ZP:function(){return F}});var a=n(809),l=n.n(a),r=n(92447),s=n(32292),i=n(28140),o=n(26265),d=n(67294),c=n(98707),p=n(45578),u=n.n(p),y=n(83332),m=n(75750),g=n(1537),f=n(3072),_=n(88416);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x,b;!function(e){e.min="min",e.default="default"}(x||(x={})),function(e){e.hidden="hidden",e.idle="idle",e.expanded="expanded"}(b||(b={}));var Z;!function(e){e.addNewReply="addNewReply",e.clearMention="clearMention",e.deleteReply="deleteReply",e.expand="expand",e.fetch="fetch",e.fetchCompleted="fetchCompleted",e.fetchError="fetchError",e.fetchSpecificReply="fetchSpecificReply",e.setCurrentUser="setCurrentUser",e.toggle="toggle",e.toggleReplyForm="toggleReplyForm",e.toggleNestedReplyForm="toggleNestedReplyForm",e.updateReply="updateReply"}(Z||(Z={}));var v=function(e,t){var n;switch(t.type){case Z.addNewReply:return R(R({},e),{},{replyFormState:b.idle,status:m.Z.idle,replies:[t.payload].concat((0,i.Z)(e.replies)),repliesToDisplay:e.repliesToDisplay+1,replyCount:e.replyCount+1,totalReplies:e.totalReplies+1});case Z.clearMention:return R(R({},e),{},{mention:null});case Z.deleteReply:return R(R({},e),{},{replies:e.replies.map((function(e){return e.id!==t.payload?e:R(R({},e),{},{status:0})}))});case Z.expand:return function(e){var t=e.replyCount>e.replies.length?m.Z.pending:m.Z.idle,n=e.user&&e.user.rid!==c.RoleId.ReadOnly?b.expanded:e.replyFormState;return e.canReply||(t=m.Z.disabled),R(R({},e),{},{fetchOnExpand:!1,replyFormState:n,status:t})}(e);case Z.fetch:return function(e){if(e.replies.length>e.repliesToDisplay+12){var t=e.replies.length||e.threadType===x.default?12:2;return R(R({},e),{},{repliesToDisplay:e.repliesToDisplay+Math.min(e.replies.length,t)})}return e.replyCount>e.replies.length?R(R({},e),{},{status:m.Z.pending,specificReplyId:null}):R(R({},e),{},{repliesToDisplay:e.replies.length,specificReplyId:null})}(e);case Z.fetchCompleted:return function(e,t){var n=t.results,a=e.replies.length&&!e.specificReplyId?u()([].concat((0,i.Z)(e.replies),(0,i.Z)(n)),"id"):n,l=e.replies.length||e.threadType===x.default?12:2;return R(R({},e),{},{nextPageUrl:t.nextPageUrl,status:m.Z.idle,replies:a,repliesToDisplay:e.repliesToDisplay+Math.min(a.length,l)})}(e,t.payload);case Z.fetchError:return R(R({},e),{},{error:t.payload,status:m.Z.error});case Z.fetchSpecificReply:return R(R({},e),{},{specificReplyId:t.payload,status:m.Z.pending});case Z.setCurrentUser:return R(R({},e),{},{user:t.payload});case Z.toggle:return function(e){if(e.type===y.ZP.article&&e.status===m.Z.disabled)return R(R({},e),{},{status:m.Z.collapsed});if(e.type===y.ZP.article&&!e.canReply)return R(R({},e),{},{status:m.Z.disabled});if(e.status===m.Z.disabled)return e;if(e.status!==m.Z.collapsed)return R(R({},e),{},{status:m.Z.collapsed,replyFormState:e.alwaysDisplayReplyForm?e.replyFormState:b.hidden});var t=e.user&&e.user.rid!==c.RoleId.ReadOnly?b.expanded:b.idle,n=e.replyFormState===b.hidden&&e.canReply?t:e.replyFormState;return e.fetchOnExpand?R(R({},e),{},{replyFormState:n,fetchOnExpand:!1,status:e.replyCount>e.replies.length?m.Z.pending:m.Z.idle}):R(R({},e),{},{replyFormState:n,status:m.Z.idle})}(e);case Z.toggleReplyForm:return R(R({},e),{},{replyFormState:e.replyFormState===b.expanded?b.idle:b.expanded});case Z.toggleNestedReplyForm:return R(R({},e),{},{replyFormState:e.canReply?b.expanded:e.replyFormState,mention:t.payload.id!==(null===(n=e.mention)||void 0===n?void 0:n.id)?t.payload:null});case Z.updateReply:return R(R({},e),{},{replies:e.replies.map((function(e){return e.id===t.payload.id?t.payload:e}))});default:throw new Error("Invalid action sent in ".concat(e.type,":").concat(e.id," thread reducer: ").concat(t.type))}};function F(e){var t=(0,f.Z)(),n=(0,g.Z)(v,R(R(R({},function(e){return{id:null,type:null,threadType:x.min,patchId:null,user:e,nextPageUrl:null,replies:[],repliesToDisplay:0,replyCount:0,totalReplies:0,status:m.Z.collapsed,canReply:!0,specificReplyId:null,error:null,fetchOnExpand:!1,mention:null,alwaysDisplayReplyForm:!1,replyFormState:b.hidden}}(t)),e),{},{nextPageUrl:"undefined"===typeof e.nextPageUrl?"?contentId=".concat(e.id,"&contentType=").concat(e.type):e.nextPageUrl})),a=(0,s.Z)(n,2),i=a[0],o=a[1],c=i.id,p=i.nextPageUrl,u=i.specificReplyId,y=i.status,h=i.type;return(0,d.useEffect)((function(){var e=!1,t=function(){var t=(0,r.Z)(l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!u){t.next=10;break}return t.next=4,(0,_.JT)(u);case 4:t.t1=t.sent,t.t2=[t.t1],t.t3=p,t.t0={results:t.t2,nextPageUrl:t.t3},t.next=13;break;case 10:return t.next=12,(0,_.R1)(p);case 12:t.t0=t.sent;case 13:n=t.t0,e||o({type:Z.fetchCompleted,payload:n}),t.next=20;break;case 17:t.prev=17,t.t4=t.catch(0),e||o({type:Z.fetchError,payload:t.t4});case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}();return y===m.Z.pending&&t(),function(){e=!0}}),[c,p,u,y,h]),(0,d.useEffect)((function(){o({type:Z.setCurrentUser,payload:t})}),[t]),[i,(0,d.useMemo)((function(){return{addReply:function(e){o({type:Z.addNewReply,payload:e})},clearMention:function(){o({type:Z.clearMention})},deleteReply:function(e){o({type:Z.deleteReply,payload:e})},expandReplies:function(){o({type:Z.expand})},getReplies:function(e){o(e?{type:Z.fetchSpecificReply,payload:e}:{type:Z.fetch})},toggleReplies:function(){o({type:Z.toggle})},toggleReplyForm:function(){o({type:Z.toggleReplyForm})},toggleParentReplyForm:function(e){o({type:Z.toggleNestedReplyForm,payload:e})},updateReply:function(e){o({type:Z.updateReply,payload:e})}}}),[o])]}},5839:function(e){e.exports={Card__Body:"styles_Card__Body__2YSfY","Card__Body--Truncated":"styles_Card__Body--Truncated__3lCJO","Card__Body--Small":"styles_Card__Body--Small__3bRYf"}},169:function(e){e.exports={DeletedReply:"styles_DeletedReply__sais5",DeletedReply__text:"styles_DeletedReply__text__U7CjJ",DeletedReply__link:"styles_DeletedReply__link__2CXff"}},91806:function(e){e.exports={Mention:"styles_Mention__1zcvT",Mention__dismissButton:"styles_Mention__dismissButton__2rTH4"}},99670:function(e){e.exports={ReplyField:"styles_ReplyField__3Nl2v","ReplyField--floating":"styles_ReplyField--floating__2j2da","ReplyField--nested":"styles_ReplyField--nested__2DWFB"}},2677:function(e){e.exports={ReplyForm:"styles_ReplyForm__3YbUI","ReplyForm--floating":"styles_ReplyForm--floating__1Mv71",ReplyForm__header:"styles_ReplyForm__header__1qR73",ReplyForm__fieldContainer:"styles_ReplyForm__fieldContainer__3cNzb",ReplyForm__footer:"styles_ReplyForm__footer__vKEul",ReplyForm__cancel:"styles_ReplyForm__cancel__1bzbN",ReplyForm__submit:"styles_ReplyForm__submit__11sYc","ReplyForm--nested":"styles_ReplyForm--nested__2iz2i"}},19257:function(e){e.exports={"Thread--collapsed":"styles_Thread--collapsed__3gBro","Thread--expanded":"styles_Thread--expanded__1VeRY",Thread__action:"styles_Thread__action__1ufZ_",Thread__status:"styles_Thread__status__y2hxr",Thread__Reply:"styles_Thread__Reply__3XCPN",Thread__deleted:"styles_Thread__deleted__2_81K",Thread:"styles_Thread__3lAiJ"}}}]);